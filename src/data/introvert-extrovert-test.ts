/**
 * Тест на интроверсию/экстраверсию
 * Определяет тип личности по шкале интроверсия-экстраверсия
 */

export interface IntrovertExtrovertQuestion {
  id: string;
  text: string;
  options: {
    text: string;
    score: number; // -2 (интроверт) до +2 (экстраверт)
  }[];
}

export interface IntrovertExtrovertResult {
  type: 'introvert' | 'ambivert' | 'extrovert';
  score: number; // от -40 до +40
  percentage: number; // 0-100
  title: string;
  description: string;
  traits: string[];
  recommendations: string[];
  careers: string[];
  famous_people: string[];
}

export const introvertExtrovertQuestions: IntrovertExtrovertQuestion[] = [
  {
    id: '1',
    text: 'На вечеринке вы скорее всего будете:',
    options: [
      { text: 'Общаться с большим количеством людей, включая незнакомых', score: 2 },
      { text: 'Общаться с несколькими людьми, которых хорошо знаете', score: 1 },
      { text: 'Держаться рядом с одним хорошим другом', score: -1 },
      { text: 'Найти тихое место и наблюдать за происходящим', score: -2 }
    ]
  },
  {
    id: '2',
    text: 'Когда у вас есть свободное время, вы предпочитаете:',
    options: [
      { text: 'Провести его с друзьями или семьей', score: 2 },
      { text: 'Заняться активными социальными делами', score: 1 },
      { text: 'Почитать книгу или посмотреть фильм', score: -1 },
      { text: 'Побыть в полном одиночестве', score: -2 }
    ]
  },
  {
    id: '3',
    text: 'В рабочих ситуациях вы предпочитаете:',
    options: [
      { text: 'Работать в команде и обмениваться идеями', score: 2 },
      { text: 'Сочетать командную и индивидуальную работу', score: 1 },
      { text: 'Работать самостоятельно с периодическими консультациями', score: -1 },
      { text: 'Полностью независимую работу', score: -2 }
    ]
  },
  {
    id: '4',
    text: 'После долгого рабочего дня вы чувствуете потребность:',
    options: [
      { text: 'Встретиться с друзьями и поделиться впечатлениями', score: 2 },
      { text: 'Позвонить близкому человеку', score: 1 },
      { text: 'Заняться спокойным хобби дома', score: -1 },
      { text: 'Остаться в полном одиночестве и тишине', score: -2 }
    ]
  },
  {
    id: '5',
    text: 'Принимая важные решения, вы обычно:',
    options: [
      { text: 'Обсуждаете с несколькими людьми', score: 2 },
      { text: 'Советуетесь с одним-двумя близкими', score: 1 },
      { text: 'Обдумываете самостоятельно, затем советуетесь', score: -1 },
      { text: 'Полностью полагаетесь на собственное мнение', score: -2 }
    ]
  },
  {
    id: '6',
    text: 'На встречах и собраниях вы:',
    options: [
      { text: 'Активно участвуете в обсуждении', score: 2 },
      { text: 'Высказываетесь, когда есть что сказать', score: 1 },
      { text: 'Слушаете больше, чем говорите', score: -1 },
      { text: 'Предпочитаете молчать и наблюдать', score: -2 }
    ]
  },
  {
    id: '7',
    text: 'Ваш идеальный способ изучения нового:',
    options: [
      { text: 'Групповые дискуссии и обмен мнениями', score: 2 },
      { text: 'Парная работа или небольшие группы', score: 1 },
      { text: 'Индивидуальное изучение с последующим обсуждением', score: -1 },
      { text: 'Полностью самостоятельное изучение', score: -2 }
    ]
  },
  {
    id: '8',
    text: 'В конфликтных ситуациях вы склонны:',
    options: [
      { text: 'Открыто обсуждать проблему немедленно', score: 2 },
      { text: 'Обращаться за поддержкой к другим', score: 1 },
      { text: 'Сначала обдумать ситуацию наедине', score: -1 },
      { text: 'Избегать конфронтации как можно дольше', score: -2 }
    ]
  },
  {
    id: '9',
    text: 'Ваша энергия восстанавливается лучше всего когда вы:',
    options: [
      { text: 'Общаетесь с энергичными людьми', score: 2 },
      { text: 'Проводите время с близкими друзьями', score: 1 },
      { text: 'Занимаетесь спокойными делами дома', score: -1 },
      { text: 'Полностью изолируетесь от других людей', score: -2 }
    ]
  },
  {
    id: '10',
    text: 'В новой компании вы:',
    options: [
      { text: 'Легко знакомитесь и заводите разговоры', score: 2 },
      { text: 'Ждете, когда с вами заговорят', score: 1 },
      { text: 'Держитесь рядом со знакомыми людьми', score: -1 },
      { text: 'Чувствуете себя некомфортно и хотите уйти', score: -2 }
    ]
  },
  {
    id: '11',
    text: 'При планировании выходных вы предпочитаете:',
    options: [
      { text: 'Активные мероприятия с большой компанией', score: 2 },
      { text: 'Встречи с друзьями в небольших группах', score: 1 },
      { text: 'Спокойное время дома с близкими', score: -1 },
      { text: 'Уединение и личные занятия', score: -2 }
    ]
  },
  {
    id: '12',
    text: 'Ваш стиль общения чаще всего:',
    options: [
      { text: 'Громкий и выразительный', score: 2 },
      { text: 'Открытый и дружелюбный', score: 1 },
      { text: 'Спокойный и вдумчивый', score: -1 },
      { text: 'Тихий и сдержанный', score: -2 }
    ]
  },
  {
    id: '13',
    text: 'Когда телефон звонит, вы:',
    options: [
      { text: 'С радостью отвечаете и готовы к долгому разговору', score: 2 },
      { text: 'Отвечаете и разговариваете столько, сколько нужно', score: 1 },
      { text: 'Отвечаете, но предпочитаете короткие разговоры', score: -1 },
      { text: 'Часто не отвечаете или сбрасываете', score: -2 }
    ]
  },
  {
    id: '14',
    text: 'В стрессовых ситуациях вы:',
    options: [
      { text: 'Ищете поддержку у многих людей', score: 2 },
      { text: 'Обращаетесь к близким друзьям', score: 1 },
      { text: 'Справляетесь в основном самостоятельно', score: -1 },
      { text: 'Изолируетесь до решения проблемы', score: -2 }
    ]
  },
  {
    id: '15',
    text: 'Ваш идеальный отпуск это:',
    options: [
      { text: 'Активный тур с группой новых людей', score: 2 },
      { text: 'Путешествие с близкими друзьями', score: 1 },
      { text: 'Спокойный отдых с семьей или партнером', score: -1 },
      { text: 'Уединенное путешествие или отдых дома', score: -2 }
    ]
  },
  {
    id: '16',
    text: 'Вы чувствуете себя наиболее продуктивным:',
    options: [
      { text: 'В окружении людей и активности', score: 2 },
      { text: 'При периодическом общении с коллегами', score: 1 },
      { text: 'В тихой обстановке с минимальными отвлечениями', score: -1 },
      { text: 'В полном одиночестве', score: -2 }
    ]
  },
  {
    id: '17',
    text: 'Выбирая между двумя возможностями, вы:',
    options: [
      { text: 'Быстро принимаете решение и действуете', score: 2 },
      { text: 'Советуетесь и принимаете решение довольно быстро', score: 1 },
      { text: 'Тщательно взвешиваете все варианты', score: -1 },
      { text: 'Долго размышляете и можете отложить решение', score: -2 }
    ]
  },
  {
    id: '18',
    text: 'В разговоре вы чаще:',
    options: [
      { text: 'Говорите больше, чем слушаете', score: 2 },
      { text: 'Поддерживаете баланс между говорением и слушанием', score: 1 },
      { text: 'Слушаете больше, чем говорите', score: -1 },
      { text: 'Предпочитаете только слушать', score: -2 }
    ]
  },
  {
    id: '19',
    text: 'Ваша реакция на неожиданные изменения планов:',
    options: [
      { text: 'Легко адаптируетесь и воспринимаете как приключение', score: 2 },
      { text: 'Быстро приспосабливаетесь после краткого размышления', score: 1 },
      { text: 'Нужно время, чтобы принять изменения', score: -1 },
      { text: 'Сильно расстраиваетесь и с трудом приспосабливаетесь', score: -2 }
    ]
  },
  {
    id: '20',
    text: 'В больших группах людей вы обычно чувствуете себя:',
    options: [
      { text: 'Энергичным и воодушевленным', score: 2 },
      { text: 'Комфортно, если знаете хотя бы несколько человек', score: 1 },
      { text: 'Немного напряженно, но справляетесь', score: -1 },
      { text: 'Истощенным и желающим уйти', score: -2 }
    ]
  }
];

export const calculateIntrovertExtrovertResult = (answers: Record<string, number>): IntrovertExtrovertResult => {
  const totalScore = Object.values(answers).reduce((sum, score) => sum + score, 0);
  const percentage = Math.round(((totalScore + 40) / 80) * 100);
  
  let type: 'introvert' | 'ambivert' | 'extrovert';
  let title: string;
  let description: string;
  let traits: string[];
  let recommendations: string[];
  let careers: string[];
  let famous_people: string[];

  if (totalScore <= -15) {
    type = 'introvert';
    title = 'Выраженный интроверт';
    description = 'Вы ярко выраженный интроверт. Вы черпаете энергию из внутренних размышлений и предпочитаете глубокие, содержательные взаимодействия с небольшим кругом близких людей. Одиночество для вас - не наказание, а возможность восстановиться и сосредоточиться.';
    traits = [
      'Предпочитаете глубокие беседы поверхностной болтовне',
      'Хорошо работаете самостоятельно',
      'Тщательно обдумываете решения',
      'Цените качество отношений больше количества',
      'Нуждаетесь в тишине для восстановления энергии',
      'Наблюдательны и вдумчивы',
      'Предпочитаете письменное общение устному'
    ];
    recommendations = [
      'Создайте себе тихое рабочее место для максимальной продуктивности',
      'Планируйте время для одиночества и восстановления',
      'Не принуждайте себя к чрезмерной социализации',
      'Развивайте свои сильные стороны: аналитическое мышление, креативность',
      'Ищите работу, позволяющую глубокое погружение в задачи',
      'Цените и развивайте близкие отношения'
    ];
    careers = [
      'Писатель, редактор',
      'Программист, аналитик',
      'Исследователь, ученый',
      'Художник, дизайнер',
      'Бухгалтер, финансист',
      'Библиотекарь, архивариус',
      'Психолог (индивидуальная практика)'
    ];
    famous_people = ['Альберт Эйнштейн', 'Билл Гейтс', 'Джоан Роулинг', 'Стивен Кинг', 'Марк Цукерберг'];
  } else if (totalScore >= 15) {
    type = 'extrovert';
    title = 'Выраженный экстраверт';
    description = 'Вы ярко выраженный экстраверт. Вы получаете энергию от общения с людьми и внешней активности. Вы естественно общительны, оптимистичны и любите быть в центре событий. Люди тянутся к вашей энергии и харизме.';
    traits = [
      'Легко знакомитесь с новыми людьми',
      'Предпочитаете командную работу',
      'Быстро принимаете решения',
      'Энергичны в больших группах',
      'Открыто выражаете эмоции',
      'Любите быть в центре внимания',
      'Предпочитаете устное общение письменному'
    ];
    recommendations = [
      'Ищите работу с активным взаимодействием с людьми',
      'Используйте свои коммуникативные навыки для достижения целей',
      'Не забывайте иногда делать паузы для рефлексии',
      'Развивайте лидерские качества',
      'Окружайте себя энергичными людьми',
      'Участвуйте в общественной деятельности'
    ];
    careers = [
      'Менеджер по продажам',
      'PR-специалист, маркетолог',
      'Учитель, тренер',
      'Журналист, телеведущий',
      'Политик, общественный деятель',
      'Актер, развлекатель',
      'Консультант, коуч'
    ];
    famous_people = ['Опра Уинфри', 'Ричард Брэнсон', 'Элон Маск', 'Уилл Смит', 'Джим Керри'];
  } else {
    type = 'ambivert';
    title = 'Амбиверт';
    description = 'Вы амбиверт - уравновешенный тип личности, сочетающий черты интроверта и экстраверта. Вы гибко адаптируетесь к различным ситуациям, можете быть общительным когда нужно, и наслаждаться одиночеством когда необходимо восстановиться.';
    traits = [
      'Легко адаптируетесь к разным социальным ситуациям',
      'Можете работать как в команде, так и самостоятельно',
      'Сбалансированы в общении и слушании',
      'Гибки в принятии решений',
      'Умеете находить компромиссы',
      'Комфортно чувствуете себя в средних по размеру группах',
      'Цените как социальное время, так и одиночество'
    ];
    recommendations = [
      'Используйте свою гибкость как преимущество в карьере',
      'Чередуйте социальную активность с периодами уединения',
      'Развивайте навыки как лидерства, так и самостоятельной работы',
      'Будьте медиатором в конфликтных ситуациях',
      'Ищите работу с разнообразными задачами',
      'Доверяйте своей интуиции в выборе социальных ситуаций'
    ];
    careers = [
      'Менеджер проектов',
      'HR-специалист',
      'Консультант',
      'Психолог, терапевт',
      'Предприниматель',
      'Дизайнер',
      'Преподаватель'
    ];
    famous_people = ['Барак Обама', 'Анджелина Джоли', 'Джонни Депп', 'Эмма Уотсон', 'Райан Гослинг'];
  }

  return {
    type,
    score: totalScore,
    percentage,
    title,
    description,
    traits,
    recommendations,
    careers,
    famous_people
  };
};